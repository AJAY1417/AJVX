<%- include('../layouts/user/header.ejs') %>

<div
  class="page-header text-center"
  style="background-image: url('assets/images/page-header-bg.jpg')"
>
  <div class="container">
    <h1 class="page-title">Product List</h1>
  </div>
  <!-- End .container -->
</div>
<!-- End .page-header -->

<nav aria-label="breadcrumb" class="breadcrumb-nav mb-2">
  <div class="container">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Home</a></li>
      <li class="breadcrumb-item"><a href="/shop">Shop</a></li>
      <li class="breadcrumb-item active" aria-current="page">Grid 3 Columns</li>
    </ol>
  </div>
  <!-- End .container -->
</nav>
<!-- End .breadcrumb-nav -->

<div class="page-content">
  <div class="container">
    <div class="row">
      <div class="col-lg-9">
        <div class="toolbox">
          <div class="toolbox-left">
            <div class="toolbox-info">
              Showing <span>9 of 56</span> Products
            </div>
            <!-- End .toolbox-info -->
          </div>
          <!-- End .toolbox-left -->

          <div class="toolbox-right">
            <div class="toolbox-sort">
              <label for="sortby">Sort by:</label>
              <div class="select-custom">
                <select name="sortby" id="sortby" class="form-control">
                  <option value="popularity" selected="selected">
                    Most Popular
                  </option>
                  <option value="rating">Most Rated</option>
                  <option value="date">Date</option>
                </select>
              </div>
            </div>
            <!-- End .toolbox-sort -->
            <div class="toolbox-layout">
              <a href="category-2cols.html" class="btn-layout">
                <svg width="10" height="10">
                  <rect x="0" y="0" width="4" height="4" />
                  <rect x="6" y="0" width="4" height="4" />
                  <rect x="0" y="6" width="4" height="4" />
                  <rect x="6" y="6" width="4" height="4" />
                </svg>
              </a>
              <a href="category.html" class="btn-layout active">
                <svg width="16" height="10">
                  <rect x="0" y="0" width="4" height="4" />
                  <rect x="6" y="0" width="4" height="4" />
                  <rect x="12" y="0" width="4" height="4" />
                  <rect x="0" y="6" width="4" height="4" />
                  <rect x="6" y="6" width="4" height="4" />
                  <rect x="12" y="6" width="4" height="4" />
                </svg>
              </a>
            </div>
            <!-- End .toolbox-layout -->
          </div>
          <!-- End .toolbox-right -->
        </div>
        <!-- End .toolbox -->

        <div class="products mb-3">
          <div class="row justify-content-start">
            <% for (let i = 0; i < products.length; i++) { %>
            <div class="col-6 col-md-4 col-lg-4 mb-4">
              <div
                class="product product-7 text-center"
                data-category="<%= products[i].category %>"
              >
                <figure class="product-media">
                  <span class="product-label label-new">New</span>
                  <a href="/productDetail?id=<%= products[i]._id %>">
                    <img
                      src="/public/images/products/<%= products[i].images[0] %>"
                      alt="Product image"
                      class="product-image"
                    />
                  </a>
                  <div class="product-action-vertical">
                    <a
                      href="#"
                      class="btn-product-icon btn-wishlist btn-expandable"
                      ><span>add to wishlist</span></a
                    >
                    <a
                      href="popup/quickView.html"
                      class="btn-product-icon btn-quickview"
                      title="Quick view"
                      ><span>Quick view</span></a
                    >
                    <a
                      href="#"
                      class="btn-product-icon btn-compare"
                      title="Compare"
                      ><span>Compare</span></a
                    >
                  </div>
                  <!-- End .product-action-vertical -->
                  <div class="product-action">
                    <a href="#" class="btn-product btn-cart"
                      ><span>add to cart</span></a
                    >
                  </div>
                  <!-- End .product-action -->
                </figure>



        <!-- End .product-media -->
<div class="product-body">
  <div class="product-cat">
    <a href="#">
      <%= products[i].category ? products[i].category.name : 'Uncategorized' %>
    </a>
  </div>
  
    <!-- End .product-cat -->
    <h3
      class="product-title"
      style="font-size: 18px; font-weight: bold; color: #333"
    >
      <a href="product.html"><%= products[i].name %></a>
    </h3>
    <!-- End .product-title -->
    <div class="product-price text-center" style="color: red; font-size: 16px; display: flex; justify-content: center; align-items: center;">
      <span class="new-price">$<%= products[i].price %></span>
    </div>
    <!-- End .product-price -->
  </div>
  <!-- End .product-body -->
  </div>
  <!-- End .product -->
  </div>
  <!-- End .col-6 col-md-4 col-lg-4 -->
  <% } %>
  </div>
  </div>
  </div>
  <!-- End .col-lg-9 -->
  





      
      <aside class="col-lg-3 order-lg-first">
        <div class="sidebar sidebar-shop">
          <div class="widget widget-clean">
            <label>Filters:</label>
            <a href="#" class="sidebar-filter-clear">Clean All</a>
          </div>
          <!-- End .widget widget-clean -->
          <div class="widget widget-collapsible">
            <h3 class="widget-title">
              <a
                data-toggle="collapse"
                href="#widget-1"
                role="button"
                aria-expanded="true"
                aria-controls="widget-1"
              >
                Category
              </a>
            </h3>
            <!-- End .widget-title -->
            <div class="collapse show" id="widget-1">
              <div class="widget-body">
                <div class="filter-items filter-items-count">
                  <% categories.forEach((category, index) => { %>
                  <div class="filter-item">
                    <div class="custom-control custom-checkbox">
                      <input
                        type="checkbox"
                        class="custom-control-input"
                        id="cat-<%= index + 1 %>"
                      />
                      <label
                        class="custom-control-label"
                        for="cat-<%= index + 1 %>"
                        ><%= category.name %></label
                      >
                    </div>
                    <!-- End .custom-checkbox -->
                    <span class="item-count">3</span>
                  </div>
                  <!-- End .filter-item -->
                  <% }); %>
                </div>
              </div>
            </div>
          </div>
        </div>
      </aside>
    </div>
  </div>
    <!-- Pagination Section -->
    <nav aria-label="Page navigation example">
      <ul class="pagination justify-content-center">
        <li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
          <a class="page-link" href="<%= currentPage === 1 ? '#' : '/shop?page=' + (currentPage - 1) %>" tabindex="-1">Previous</a>
        </li>

        <% for (let i = 1; i <= totalPages; i++) { %>
          <li class="page-item <%= currentPage === i ? 'active' : '' %>">
            <a class="page-link" href="/shop?page=<%= i %>"><%= i %></a>
          </li>
        <% } %>

        <li class="page-item <%= currentPage === totalPages ? 'disabled' : '' %>">
          <a class="page-link" href="<%= currentPage === totalPages ? '#' : '/shop?page=' + (currentPage + 1) %>">Next</a>
        </li>
      </ul>
    </nav>
    <!-- End Pagination Section -->

</div>





<%- include('../layouts/user/footer.ejs') %>
